{"version":3,"sources":["utils/userLoginContext.ts","components/searchPage/components/searchBar/SearchBar.tsx","requests/headers.ts","requests/get/userId/userId.ts","components/searchPage/components/profileNotFound/ProfileNotFound.tsx","components/searchPage/SearchPage.tsx","requests/get/userFollows/userFollows.ts","components/profilePage/components/followedList/FollowedList.tsx","components/profilePage/ProfilePage.tsx","components/App.tsx","index.tsx"],"names":["userLoginContext","createContext","SearchBar","useContext","setUserLogin","onChange","e","target","value","type","className","placeholder","headers","Headers","process","Authorization","userId","userLogin","a","fetch","request","json","console","log","ProfileNotFound","profileName","SearchPage","USER_LOGIN","useParams","useState","toProfilePage","setToProfilePage","profileNotFoundName","setProfileNotFoundName","getUserId","res","data","id","onSubmit","event","preventDefault","to","icon","userFollows","FollowedList","follows","map","follow","to_name","ProfilePage","userObject","setUserObject","toSearchPage","setToSearchPage","getUserData","userData","useEffect","fetchUserObject","App","Provider","path","exact","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.41a4c505.chunk.js","sourcesContent":["import { createContext } from \"react\";\n\ntype overviewContextProps = [\n  userLogin: string,\n  setOverviewBox: React.Dispatch<React.SetStateAction<any>>\n];\n\nexport const userLoginContext = createContext<overviewContextProps>([\"\", () => { }]);","import { useContext } from 'react';\nimport { userLoginContext } from '../../../../utils/userLoginContext';\n\nexport const SearchBar = () => {\n  const [, setUserLogin] = useContext(userLoginContext);\n\n  return (\n    <input\n      onChange={(e) => setUserLogin(e.target.value)}\n      type='text'\n      className='SearchBar'\n      placeholder='Search'\n    ></input>\n  );\n};\n","const clientId = process.env.REACT_APP_CLIENT_ID;\nconst oauthCode = process.env.REACT_APP_OAUTH_CODE;\nexport const headers = new Headers({\n  'Client-ID': clientId!,\n  Authorization: `Bearer ${oauthCode}`,\n});","//https://discuss.dev.twitch.tv/t/getting-user-ids/13806\nimport { userIdType } from './userId.type';\nimport { headers } from '../../headers';\n\nlet url = 'https://api.twitch.tv/helix/users?login=';\nexport const userId = async (\n  userLogin: string\n): Promise<userIdType | undefined> => {\n  try {\n    const request = await fetch(url + userLogin, { headers: headers });\n    return await request.json();\n  } catch (err) {\n    console.log(err);\n  }\n};\n","import React from 'react';\n\ninterface Props {\n  profileName: string;\n}\nexport const ProfileNotFound: React.FC<Props> = ({ profileName }) => {\n  return <div>{profileName} doesn't exist, try again</div>;\n};\n","import { useState, useContext } from 'react';\nimport { SearchBar } from './components/searchBar/SearchBar';\nimport { Icon } from '@iconify/react';\nimport { userLoginContext } from '../../utils/userLoginContext';\nimport { Redirect, useParams } from 'react-router-dom';\n\nimport { userId } from '../../requests/get/userId/userId';\nimport { ProfileNotFound } from './components/profileNotFound/ProfileNotFound';\n\ninterface ParamTypes {\n  USER_LOGIN?: string;\n}\nexport const SearchPage = () => {\n  const { USER_LOGIN } = useParams<ParamTypes>();\n  const [userLogin] = useContext(userLoginContext);\n  const [toProfilePage, setToProfilePage] = useState(false);\n  const [profileNotFoundName, setProfileNotFoundName] = useState(USER_LOGIN);\n  const getUserId = async (userLogin: string) => {\n    const res = await userId(userLogin);\n    const id = res?.data[0]?.id;\n    if (!id) {\n      return false;\n    }\n    return res?.data[0]?.id;\n  };\n\n  const onSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    const id = await getUserId(userLogin);\n    if (!id) {\n      setProfileNotFoundName(userLogin);\n    } else {\n      setToProfilePage(true);\n    }\n  };\n  if (toProfilePage) {\n    return <Redirect to={`${process.env.PUBLIC_URL}/${userLogin}`} />;\n  }\n  return (\n    <div className='SearchPage'>\n      <form onSubmit={onSubmit} className='searchField'>\n        <Icon icon='logos:twitch' className='searchField__icon' />\n        <div className='searchField__text'>\n          <p>Search for twitch user</p>\n        </div>\n        <SearchBar />\n        {profileNotFoundName && (\n          <ProfileNotFound profileName={profileNotFoundName} />\n        )}\n      </form>\n    </div>\n  );\n};\n","//https://dev.twitch.tv/docs/api/reference/#get-users-follows\nimport { userFollowsType } from './userFollows.type';\nimport { headers } from '../../headers';\n\nlet url = 'https://api.twitch.tv/helix/users/follows?first=10&from_id=';\nexport const userFollows = async (\n  userId: string\n): Promise<userFollowsType | undefined> => {\n  console.log(process.env.REACT_APP_OAUTH_CODE);\n  try {\n    const request = await fetch(url + userId, { headers: headers });\n    return await request.json();\n  } catch (err) {\n    console.log(err);\n  }\n};\n","import React from 'react';\nimport { follow } from '../../../../requests/get/userFollows/userFollows.type';\n\ninterface Props {\n  follows: follow[];\n}\n\nexport const FollowedList: React.FC<Props> = ({ follows }) => {\n  return <div>{follows.map((follow: follow) => follow.to_name)}</div>;\n};\n","import { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { userFollows } from '../../requests/get/userFollows/userFollows';\nimport { userFollowsType } from '../../requests/get/userFollows/userFollows.type';\nimport { userId } from '../../requests/get/userId/userId';\nimport { FollowedList } from './components/followedList/FollowedList';\nimport { Redirect } from 'react-router-dom';\n\ninterface ParamTypes {\n  USER_LOGIN: string;\n}\nexport const ProfilePage = () => {\n  const { USER_LOGIN } = useParams<ParamTypes>();\n  const [userObject, setUserObject] = useState<userFollowsType>();\n  const [toSearchPage, setToSearchPage] = useState(false);\n  const getUserId = async (userLogin: string) => {\n    const res = await userId(userLogin);\n    const id = res?.data[0].id;\n    if (!id) {\n      return false;\n    }\n    return res?.data[0].id;\n  };\n  const getUserData = async (userId: string) => {\n    const userData = await userFollows(userId);\n    return userData;\n  };\n  useEffect(() => {\n    const fetchUserObject = async () => {\n      const userId = await getUserId(USER_LOGIN);\n      if (!userId) {\n        setToSearchPage(true);\n      } else {\n        setUserObject(await getUserData(userId));\n      }\n    };\n    fetchUserObject();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [USER_LOGIN]);\n\n  if (toSearchPage) {\n    return <Redirect to={`${process.env.PUBLIC_URL}/error/${USER_LOGIN}`} />;\n  }\n  return (\n    <div className='profilePage'>\n      {typeof userObject === 'string' ? '' : ''}\n      {userObject?.data && <FollowedList follows={userObject.data} />}\n    </div>\n  );\n};\n","import { SearchPage } from './searchPage/SearchPage';\nimport { ProfilePage } from './profilePage/ProfilePage';\nimport { userLoginContext } from '../utils/userLoginContext';\nimport { useState } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\n\nexport const App = () => {\n  const [userLogin, setUserLogin] = useState('');\n  return (\n    <Router>\n      <div>\n        <Switch>\n          <userLoginContext.Provider value={[userLogin, setUserLogin]}>\n            <Route\n              path={[\n                `${process.env.PUBLIC_URL}/`,\n                `${process.env.PUBLIC_URL}/error/:USER_LOGIN`,\n              ]}\n              exact\n            >\n              {/* <Route path={`${process.env.PUBLIC_URL}/error/:USER_LOGIN`}> */}\n              <SearchPage />\n              {/* </Route> */}\n            </Route>\n            <Route path={`${process.env.PUBLIC_URL}/:USER_LOGIN`}>\n              <ProfilePage />\n            </Route>\n          </userLoginContext.Provider>\n        </Switch>\n      </div>\n    </Router>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport { App } from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}